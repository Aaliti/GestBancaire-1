<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="header">


    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!--    <link rel="stylesheet" th:href="@{/css/formatting.css}" >-->
    <!--    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>-->
    <title>Gestion Bancaire</title>
</head>

<div th:fragment="frag_transfert(duAu, tabledata)" class="form-row">

    <div class="col">
        <label></label>
        <p th:text="${duAu}"></p>
    </div>


    <div class="col">
        <label>Select Compte</label>

        <!-- <select th:each="dataList: ${abledata}" class="form-control" id="exampleFormControlSelect1">
         <option th:text="*{__${dataList}__.id}"></option>
         </select>-->

        <select class="form-control" th:id="'Select'+${duAu}">
            <option value="0">Select Compte</option>
            <option th:each="dataList: ${tabledata}" th:text="*{dataList.compteId}"
                    th:value="*{dataList.compteId}"></option>

        </select>
    </div>
    <div class="col">
        <label>Nom Compte</label>
        <input disabled type="text" class="form-control nom" th:id="'nom'+${duAu}">
    </div>
    <div class="col">
        <label>Solde Compte</label>
        <input disabled type="text" class="form-control solde" th:id="'solde'+${duAu}">
    </div>
    <script>
        var test =$('#SelectDu').children();
        $('#Select[[${duAu}]]').change(function () {
            //if(($('#Select[[${duAu}]]').attr('id')) == 'SelectDu')
                var idValue = $(this).children(":selected").attr('value');
                    if (idValue != 0) {
                        $.ajax({
                            url: "/formResult",
                            type: "POST",
                            data: {
                                id: idValue

                            },
                            success: function (result) {

                                $('#nom[[${duAu}]]').val(result['nom']);
                                $('#solde[[${duAu}]]').val(result['solde']);

                                $('#SelectAu option[value='+idValue+']').remove();
                                var oldValue = idValue;
                            }
                        });
                        /*$('#nom').val(idValue);
                        $('#solde').val(idValue);*/
                    } else {
                        $('#nom[[${duAu}]]').val("");
                        $('#solde[[${duAu}]]').val("");
                    }

        });
    </script>
</div>

</html>